<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
  <link rel="SHORTCUT ICON" href="../bilder//pl.ico">
  <title>Ausf&uuml;hren von Perl-Code mittels eval  </title>
 </head>
 <body bgcolor="#ffffff">
  <hr>
  <h1 align="center">Ausf&uuml;hren von Perl-Code mittels <code>eval</code></h1>
  <table align="center"><tr>
  <td><a href="perl_sub.html">  <img src="../bilder//perl_links.gif" alt="[ vorherige Seite ]" width="43" height="30" border="0"></a></td>
  <td><a href="../perl-tutorial.html">  <img src="../bilder//perl_titel.gif" alt="[ Titelseite ]" width="81" height="22" border="0"></a></td>
  <td><a href="perl_inhalt.html">  <img src="../bilder//perl_inhalt.gif" alt="[ Inhalt ]" width="57" height="22" border="0"></a></td>
  <td><a href="perl_index.html">  <img src="../bilder//perl_index.gif" alt="[ Index ]" width="54" height="22" border="0"></a></td>
  <td><a href="perl_spevar.html">  <img src="../bilder//perl_rechts.gif" alt="[ n&auml;chste Seite ]" width="43" height="30" border="0"></a></td>
  </tr></table>
  <hr>
  <p>

Normalerweise wird der auszuf&uuml;hrende Code in eine Datei geschrieben,
deren Inhalt dann durch Perl abgearbeitet wird. Will man aber einem
Benutzer beispielsweise die M&ouml;glichkeit geben eigene Perl-Befehle
einzugeben und ausf&uuml;hren zu lassen, so ergibt sich das Problem,
da&szlig; diese Kommandos zum Zeitpunkt des Programmstarts noch nicht
bekannt sind.
  </p>
  <p>

Die Funktion <code>eval()</code> erwartet als Argument Perl-Code, der
entweder in Form einer Zeichenkette oder als Code-Block &uuml;bergeben wird.
Dieser Code wird dann zur Programmlaufzeit &uuml;bersetzt und ausgef&uuml;hrt.
  </p>
<table align="center" bgcolor="#ffcc99" border="0" cellpadding="2" width="80%"><tr><td>
<table bgcolor="#ffffcc" border="0" cellpadding="10" width="100%">
<tr><td><code>#!/usr/local/bin/perl&nbsp;-w<br><br>use&nbsp;strict;<br><br>my&nbsp;$v&nbsp;=&nbsp;5;<br>print&nbsp;"\$v&nbsp;=&nbsp;$v\n";<br><br><font color="#0000cc">eval&nbsp;'$v++'</font>;<br>print&nbsp;"\$v&nbsp;=&nbsp;$v\n";<br><br><font color="#0000cc">eval&nbsp;{&nbsp;$v++&nbsp;}</font>;<br>print&nbsp;"\$v&nbsp;=&nbsp;$v\n";<br><br></code></td></tr></table>
</td></tr></table>
<table align="center" bgcolor="#66cc66" border="0" cellpadding="2" width="80%"><tr><td>
<table bgcolor="#ccffcc" border="0" cellpadding="5" width="100%">
<tr><td><code>$v&nbsp;=&nbsp;5<br>$v&nbsp;=&nbsp;6<br>$v&nbsp;=&nbsp;7<br></code></td></tr></table>
</td></tr></table>
  <p>

Die erste Variante, bei der ein String &uuml;bergeben wird, erlaubt eine
Fehlerbehandlung zur Laufzeit, ohne da&szlig; notwendigerweise das
Programm beendet wird. Im Fehlerfalle wird dazu die spezielle Variable
<code>$@</code> gesetzt.
  </p>
<table align="center" bgcolor="#ffcc99" border="0" cellpadding="2" width="80%"><tr><td>
<table bgcolor="#ffffcc" border="0" cellpadding="10" width="100%">
<tr><td><code>#!/usr/local/bin/perl&nbsp;-w<br><br>use&nbsp;strict;<br><br>my&nbsp;$v&nbsp;=&nbsp;5;<br>print&nbsp;"\$v&nbsp;=&nbsp;$v\n";<br><br>eval&nbsp;'$v+';<br>if(<font color="#0000cc">$@</font>)&nbsp;{&nbsp;print&nbsp;"Fehler:&nbsp;<font color="#0000cc">$@</font>"&nbsp;}<br>print&nbsp;"\$v&nbsp;=&nbsp;$v\n";<br></code></td></tr></table>
</td></tr></table>
<table align="center" bgcolor="#66cc66" border="0" cellpadding="2" width="80%"><tr><td>
<table bgcolor="#ccffcc" border="0" cellpadding="5" width="100%">
<tr><td><code>$v&nbsp;=&nbsp;5<br>Fehler:&nbsp;syntax&nbsp;error&nbsp;at&nbsp;(eval&nbsp;1)&nbsp;line&nbsp;2,&nbsp;at&nbsp;EOF<br>$v&nbsp;=&nbsp;5<br></code></td></tr></table>
</td></tr></table>
  <hr>
  <table align="center"><tr>
  <td><a href="perl_sub.html">  <img src="../bilder//perl_links.gif" alt="[ vorherige Seite ]" width="43" height="30" border="0"></a></td>
  <td><a href="../perl-tutorial.html">  <img src="../bilder//perl_titel.gif" alt="[ Titelseite ]" width="81" height="22" border="0"></a></td>
  <td><a href="perl_inhalt.html">  <img src="../bilder//perl_inhalt.gif" alt="[ Inhalt ]" width="57" height="22" border="0"></a></td>
  <td><a href="perl_index.html">  <img src="../bilder//perl_index.gif" alt="[ Index ]" width="54" height="22" border="0"></a></td>
  <td><a href="perl_spevar.html">  <img src="../bilder//perl_rechts.gif" alt="[ n&auml;chste Seite ]" width="43" height="30" border="0"></a></td>
  </tr></table>
  <hr>
  <table width="100%"><tr>
    <td align="left"><i>Autor: 
       <a href="mailto:Eike.Grote@web.de">Eike&nbsp;Grote</a></i>
    </td>
    <td align="right"><i>Version: 2.04 (22.1.2011)</i>
    </td>
  </tr></table>
 </body>
</html>
